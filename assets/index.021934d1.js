import{S as A,i as G,s as H,e as k,a as v,b as h,n as T,d as b,c as M,h as R,u as Z,f as L,g as _,l as I,r as ne,t as O,j as q,k as z,m as D,o as le,p as K,q as $,v as x,w as ee,x as te}from"./vendor.22bd04f5.js";const oe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};oe();function ce(l){let e;return{c(){e=k("main"),e.innerHTML=`<div><h1>Bulk Block</h1> 
    <p>\u30A2\u30D7\u30EA\u306E\u8AAC\u660E\u3092\u5165\u529B\u30A2\u30D7\u30EA\u306E\u8AAC\u660E\u3092\u5165\u529B\u30A2\u30D7\u30EA\u306E\u8AAC\u660E\u3092\u5165\u529B\u30A2\u30D7\u30EA\u306E\u8AAC\u660E\u3092\u5165\u529B\u30A2\u30D7\u30EA\u306E\u8AAC\u660E\u3092\u5165\u529B\u30A2\u30D7\u30EA\u306E\u8AAC\u660E\u3092\u5165\u529B</p></div> 
  <a href="/login">Twitter\u3067\u30ED\u30B0\u30A4\u30F3</a>`,v(e,"id","guest")},m(n,t){h(n,e,t)},p:T,i:T,o:T,d(n){n&&b(e)}}}class se extends A{constructor(e){super();G(this,e,null,ce,H,{})}}function J(l,e,n){const t=l.slice();return t[16]=e[n],t[17]=e,t[18]=n,t}function Q(l){let e,n,t={ctx:l,current:null,token:null,hasCatch:!1,pending:ie,then:ae,catch:re,value:4};return R(n=l[4],t),{c(){e=M(),t.block.c()},m(o,r){h(o,e,r),t.block.m(o,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e},p(o,r){l=o,t.ctx=l,r&16&&n!==(n=l[4])&&R(n,t)||Z(t,l,r)},d(o){o&&b(e),t.block.d(o),t.token=null,t=null}}}function re(l){return{c:T,m:T,p:T,d:T}}function ae(l){let e,n,t,o,r=l[1].length+"",a;return{c(){e=k("p"),n=O("\u30D6\u30ED\u30C3\u30AF\u5B8C\u4E86: "),t=O(l[2]),o=O(" / "),a=O(r)},m(u,i){h(u,e,i),_(e,n),_(e,t),_(e,o),_(e,a)},p(u,i){i&4&&q(t,u[2]),i&2&&r!==(r=u[1].length+"")&&q(a,r)},d(u){u&&b(e)}}}function ie(l){let e,n,t,o,r=l[1].length+"",a;return{c(){e=k("p"),n=O("\u30D6\u30ED\u30C3\u30AF\u4E2D: "),t=O(l[2]),o=O(" / "),a=O(r)},m(u,i){h(u,e,i),_(e,n),_(e,t),_(e,o),_(e,a)},p(u,i){i&4&&q(t,u[2]),i&2&&r!==(r=u[1].length+"")&&q(a,r)},d(u){u&&b(e)}}}function V(l){let e,n,t={ctx:l,current:null,token:null,hasCatch:!0,pending:me,then:fe,catch:ue,value:3,error:19};return R(n=l[3],t),{c(){e=M(),t.block.c()},m(o,r){h(o,e,r),t.block.m(o,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e},p(o,r){l=o,t.ctx=l,r&8&&n!==(n=l[3])&&R(n,t)||Z(t,l,r)},d(o){o&&b(e),t.block.d(o),t.token=null,t=null}}}function ue(l){let e,n=l[19].message+"",t;return{c(){e=k("p"),t=O(n)},m(o,r){h(o,e,r),_(e,t)},p(o,r){r&8&&n!==(n=o[19].message+"")&&q(t,n)},d(o){o&&b(e)}}}function fe(l){let e,n=Object.keys(l[3]).length+"",t,o,r,a,u,i,y,g,N,w,j,P;function E(c,f){return f&8&&(a=null),a==null&&(a=!!Object.values(c[3]).some(he)),a?de:_e}let C=E(l,-1),d=C(l),m=Object.values(l[3]),s=[];for(let c=0;c<m.length;c+=1)s[c]=X(J(l,m,c));return{c(){e=k("p"),t=O(n),o=O("\u4EBA\u898B\u3064\u304B\u308A\u307E\u3057\u305F"),r=L(),d.c(),u=L(),i=k("button"),y=O("\u30D6\u30ED\u30C3\u30AF"),N=L();for(let c=0;c<s.length;c+=1)s[c].c();w=M(),i.disabled=g=!Object.values(l[3]).some(Y)},m(c,f){h(c,e,f),_(e,t),_(e,o),h(c,r,f),d.m(c,f),h(c,u,f),h(c,i,f),_(i,y),h(c,N,f);for(let p=0;p<s.length;p+=1)s[p].m(c,f);h(c,w,f),j||(P=I(i,"click",l[6]),j=!0)},p(c,f){if(f&8&&n!==(n=Object.keys(c[3]).length+"")&&q(t,n),C===(C=E(c,f))&&d?d.p(c,f):(d.d(1),d=C(c),d&&(d.c(),d.m(u.parentNode,u))),f&8&&g!==(g=!Object.values(c[3]).some(Y))&&(i.disabled=g),f&8){m=Object.values(c[3]);let p;for(p=0;p<m.length;p+=1){const S=J(c,m,p);s[p]?s[p].p(S,f):(s[p]=X(S),s[p].c(),s[p].m(w.parentNode,w))}for(;p<s.length;p+=1)s[p].d(1);s.length=m.length}},d(c){c&&b(e),c&&b(r),d.d(c),c&&b(u),c&&b(i),c&&b(N),le(s,c),c&&b(w),j=!1,P()}}}function _e(l){let e,n,t;function o(){return l[10](l[3])}return{c(){e=k("button"),e.textContent="\u9078\u629E\u89E3\u9664"},m(r,a){h(r,e,a),n||(t=I(e,"click",o),n=!0)},p(r,a){l=r},d(r){r&&b(e),n=!1,t()}}}function de(l){let e,n,t;function o(){return l[9](l[3])}return{c(){e=k("button"),e.textContent="\u5168\u9078\u629E"},m(r,a){h(r,e,a),n||(t=I(e,"click",o),n=!0)},p(r,a){l=r},d(r){r&&b(e),n=!1,t()}}}function W(l){let e,n,t,o,r,a,u=l[16].data.name+"",i,y,g,N,w=l[16].data.screen_name+"",j,P,E,C,d=l[16].data.description+"",m,s,c,f,p,S;function B(){l[11].call(c,l[17],l[18])}return{c(){e=k("label"),n=k("img"),r=L(),a=k("span"),i=O(u),y=L(),g=k("a"),N=O("@"),j=O(w),E=L(),C=k("span"),m=O(d),s=L(),c=k("input"),f=L(),D(n.src,t=l[16].data.profile_image_url_https)||v(n,"src",t),v(n,"alt",o=l[16].data.screen_name),v(g,"href",P="https://twitter.com/"+l[16].data.screen_name),v(g,"target","_blank"),v(g,"rel","noopener noreferrer"),v(a,"class","username"),v(C,"class","description"),v(c,"type","checkbox")},m(F,U){h(F,e,U),_(e,n),_(e,r),_(e,a),_(a,i),_(a,y),_(a,g),_(g,N),_(g,j),_(e,E),_(e,C),_(C,m),_(e,s),_(e,c),c.checked=l[16].cheched,_(e,f),p||(S=I(c,"change",B),p=!0)},p(F,U){l=F,U&8&&!D(n.src,t=l[16].data.profile_image_url_https)&&v(n,"src",t),U&8&&o!==(o=l[16].data.screen_name)&&v(n,"alt",o),U&8&&u!==(u=l[16].data.name+"")&&q(i,u),U&8&&w!==(w=l[16].data.screen_name+"")&&q(j,w),U&8&&P!==(P="https://twitter.com/"+l[16].data.screen_name)&&v(g,"href",P),U&8&&d!==(d=l[16].data.description+"")&&q(m,d),U&8&&(c.checked=l[16].cheched)},d(F){F&&b(e),p=!1,S()}}}function X(l){let e=z(l[16].data),n,t=e&&W(l);return{c(){t&&t.c(),n=M()},m(o,r){t&&t.m(o,r),h(o,n,r)},p(o,r){r&8&&(e=z(o[16].data)),e?t?t.p(o,r):(t=W(o),t.c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},d(o){t&&t.d(o),o&&b(n)}}}function me(l){let e;return{c(){e=k("p"),e.textContent="\u8AAD\u307F\u8FBC\u307F\u4E2D"},m(n,t){h(n,e,t)},p:T,d(n){n&&b(e)}}}function pe(l){let e,n,t,o,r,a,u,i,y,g,N,w,j,P,E,C,d=l[4]!==null&&Q(l),m=l[3]!==null&&V(l);return{c(){e=k("header"),n=k("h1"),n.textContent="Bulk Block",t=L(),o=k("button"),o.textContent="\u30ED\u30B0\u30A2\u30A6\u30C8",r=L(),a=k("main"),u=k("div"),i=k("input"),y=L(),g=k("button"),g.textContent="\u691C\u7D22\u3059\u308B",N=L(),d&&d.c(),w=L(),m&&m.c(),j=L(),P=k("footer"),P.innerHTML="<small>\xA9 \u3059,\u306F,\u3055</small>",v(i,"type","search"),v(i,"id",""),v(u,"class","search_box"),v(a,"id","logged")},m(s,c){h(s,e,c),_(e,n),_(e,t),_(e,o),h(s,r,c),h(s,a,c),_(a,u),_(u,i),_(u,y),_(u,g),_(a,N),d&&d.m(a,null),_(a,w),m&&m.m(a,null),h(s,j,c),h(s,P,c),E||(C=[I(o,"click",ke),I(i,"change",l[8]),I(g,"click",l[5])],E=!0)},p(s,[c]){s[4]!==null?d?d.p(s,c):(d=Q(s),d.c(),d.m(a,w)):d&&(d.d(1),d=null),s[3]!==null?m?m.p(s,c):(m=V(s),m.c(),m.m(a,null)):m&&(m.d(1),m=null)},i:T,o:T,d(s){s&&b(e),s&&b(r),s&&b(a),d&&d.d(),m&&m.d(),s&&b(j),s&&b(P),E=!1,ne(C)}}}function ke(){document.cookie="access_token=;max-age=-1;",document.cookie="access_token_secret=;max-age=-1;",location.reload()}const he=l=>!l.cheched,Y=l=>l.cheched;function be(l,e,n){let t="",{cookie:o}=e;function r(s){const c=new URL(location.origin+s);return c.searchParams.set("access_token",o.access_token),c.searchParams.set("access_token_secret",o.access_token_secret),s=c.toString(),fetch(s,{method:"POST"})}function a(s){const c=new URL(location.origin+s);return c.searchParams.set("access_token",o.access_token),c.searchParams.set("access_token_secret",o.access_token_secret),s=c.toString(),fetch(s,{method:"GET"})}let u=null;async function i(){return new Promise(async(s,c)=>{const f=await a("/search?q="+encodeURIComponent(t));f.ok?s(f.json()):c(Error("\u30C7\u30FC\u30BF\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F: "+f.status))})}async function y(){return new Promise(async(s,c)=>{const f=await a("/following");f.ok?s(f.json()):c(Error("\u30C7\u30FC\u30BF\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F: "+f.status))})}async function g(){n(3,u=new Promise(async(s,c)=>{try{Promise.all([i(),y()]).then(([f,p])=>{let S={};for(const{user:B}of f.statuses){if(B.id_str in S)continue;const F=p.ids.includes(B.id_str);S[B.id_str]={following:F,data:B,cheched:!F}}s(S)}).catch(f=>{c(f)})}catch(f){c(f)}}))}let N=[],w=0,j=null;async function P(){n(1,N=Object.values(await u).map(s=>{if(!!s.cheched)return s.data.id_str}).filter(s=>s)),n(4,j=new Promise(async s=>{n(2,w=0);let c={};await Promise.all(N.map(async f=>{const p=await r("/block?id="+f),{ok:S,statusText:B}=p;c[f]={data:p.ok?await p.json():void 0,ok:S,statusText:B},n(2,w++,w)})),s(c)}))}const E=s=>n(0,t=s.currentTarget.value),C=s=>{Object.keys(s).forEach(c=>{n(3,s[c].cheched=!0,s)})},d=s=>{Object.keys(s).forEach(c=>{n(3,s[c].cheched=!1,s)})};function m(s,c){s[c].cheched=this.checked,n(3,u)}return l.$$set=s=>{"cookie"in s&&n(7,o=s.cookie)},[t,N,w,u,j,g,P,o,E,C,d,m]}class ge extends A{constructor(e){super();G(this,e,be,pe,H,{cookie:7})}}function we(l){let e,n;return e=new se({}),{c(){x(e.$$.fragment)},m(t,o){ee(e,t,o),n=!0},p:T,i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function ye(l){let e,n;return e=new ge({props:{cookie:l[0]}}),{c(){x(e.$$.fragment)},m(t,o){ee(e,t,o),n=!0},p:T,i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function ve(l){let e,n,t,o;const r=[ye,we],a=[];function u(i,y){return i[1]?0:1}return e=u(l),n=a[e]=r[e](l),{c(){n.c(),t=M()},m(i,y){a[e].m(i,y),h(i,t,y),o=!0},p(i,[y]){n.p(i,y)},i(i){o||(K(n),o=!0)},o(i){$(n),o=!1},d(i){a[e].d(i),i&&b(t)}}}function Oe(l){const e={};for(const[n,t]of l.split("; ").map(o=>o.split("=")))e[n]=t;return e}function je(l){const e=Oe(document.cookie),n="access_token"in e&&"access_token_secret"in e;return[e,n]}class Pe extends A{constructor(e){super();G(this,e,je,ve,H,{})}}new Pe({target:document.getElementById("app")});
